{{ $sectionKey := $.Scratch.Get "sectionKey" }}
{{ $sectionHref := printf "%s%s" ($.Site.BaseURL) (index .Site.Params.sections $sectionKey "path") }}
{{ $sectionLogo := index .Site.Params.sections $sectionKey "logo" }}
{{ $.Scratch.Set "hasPrevious" false }}
<article class="inner-results">
    <h3><a href='{{ $sectionHref }}'><img src='/img/logos/{{ $sectionLogo }}'></a>
        {{ if eq $sectionKey "addons" }}
            {{ $.Scratch.Set "href" (delimit (first 5 (split .Permalink "/")) "/") }}
            <a href='{{ $.Scratch.Get "href" }}'>{{ or .Params.parent .Title }}</a>
            {{ $.Scratch.Set "hasPrevious" true }}
        {{ else if eq $sectionKey "guides" }}
            {{ $.Scratch.Set "href" (delimit (first 5 (split .Permalink "/")) "/") }}
            <a href='{{ $.Scratch.Get "href" }}'>{{ or .Params.parent .Title }}</a>
            {{ $.Scratch.Set "hasPrevious" true }}
        {{ end }}
        {{ if not (eq (printf "%s/" ($.Scratch.Get "href")) (.Permalink)) }}
        {{ if $.Scratch.Get "hasPrevious" }}
            &nbsp;<i class="fa fa-caret-right"></i>
        {{ end }}
        <a href='{{ .Permalink }}'>{{ .Title }}</a>
        {{ end }}
    </h3>
    <p>{{ .Summary }}</p>
    <div class="tags">
        {{ range .Params.tags }}<a class="label label-default" href="{{ $.Site.BaseURL }}tags/{{ . | urlize }}">{{ . | title }}</a> {{ end }}
    </div>
</article>
